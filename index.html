<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<title>Jogo da Aninha</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    font-family: Arial, sans-serif;
    background-color: #fff;
    user-select: none;
  }
  #gameCanvas {
    display: block;
    margin: 20px auto;
    background-color: #fff;
    border: 2px solid #000;
    box-sizing: border-box;
  }
  #info {
    position: absolute;
    top: 10px;
    left: 10px;
    color: #000;
    font-weight: bold;
    font-size: 18px;
    background: rgba(255, 255, 255, 0.8);
    padding: 6px 12px;
    border-radius: 12px;
    z-index: 10;
  }
  #finalMsg {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 28px;
    color: #ff1493;
    font-weight: bold;
    background: rgba(255, 192, 203, 0.9);
    padding: 25px 40px;
    border-radius: 20px;
    box-shadow: 0 0 15px #ff69b4;
    display: none;
    user-select: none;
    text-align: center;
    z-index: 20;
  }
  #compliment {
    position: absolute;
    top: 70px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 22px;
    color: #ff1493;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.5s ease;
    user-select: none;
    pointer-events: none;
    z-index: 15;
  }
</style>
</head>
<body>
  <canvas id="gameCanvas" width="400" height="600"></canvas>
  <div id="info">Pontua√ß√£o: <span id="score">0</span> | Recorde: <span id="highScore">0</span></div>
  <div id="finalMsg">‚ù§Ô∏è Voc√™ √© incr√≠vel, Aninha! ‚ù§Ô∏è</div>
  <div id="compliment"></div>

<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  // Imagem de fundo (cabe√ßa colorida)
  const bgImage = new Image();
  bgImage.src = "https://harikacocuklarizmir.com/images/uploads/2dc834e1801c5d89034a2b8454d42ce8.jpg";

  // Barra branca (paddle)
  const paddleWidth = 80;
  const paddleHeight = 10;
  let paddleX = (canvas.width - paddleWidth) / 2;

  // Bola rosa
  const ballRadius = 7;
  let balls = [
    { x: canvas.width / 2, y: canvas.height - 40, dx: 3, dy: -3 }
  ];

  // Layout do cora√ß√£o (tijolos)
  const heartLayout = [
    "000001111110000",
    "000111111111000",
    "001111111111100",
    "011111111111110",
    "011111111111110",
    "011111111111110",
    "001111111111100",
    "000111111111000",
    "000011111110000",
    "000001111100000",
    "000000111000000",
    "000000010000000",
    "000000000000000"
  ];
  const brickRowCount = heartLayout.length;
  const brickColumnCount = heartLayout[0].length;
  const brickWidth = 24;
  const brickHeight = 20;
  const brickPadding = 4;
  const brickOffsetTop = 30;
  const brickOffsetLeft = 8;

  let bricks = [];
  for (let r = 0; r < brickRowCount; r++) {
    bricks[r] = [];
    for (let c = 0; c < brickColumnCount; c++) {
      bricks[r][c] = { x: 0, y: 0, status: heartLayout[r][c] === "1" ? 1 : 0 };
    }
  }

  // Pontua√ß√£o e recorde
  let score = 0;
  let highScore = localStorage.getItem("highScoreAna") || 0;
  document.getElementById("highScore").textContent = highScore;

  // Elogios com emojis fofos para a Aninha
  const compliments = [
    "Linda, Aninha! üíñ",
    "Voc√™ arrasa! üåü",
    "Show de bola! üéâ",
    "Brilhante, Aninha! ‚ú®",
    "Que fofura! ü•∞",
    "Incr√≠vel, Aninha! üíï",
    "Maravilhosa! üåà",
    "Uau, Aninha! üòç",
    "Sensacional! üí´",
    "Voc√™ √© top! üî•"
  ];
  const complimentDiv = document.getElementById("compliment");
  let complimentTimeout;

  function showCompliment() {
    clearTimeout(complimentTimeout);
    const text = compliments[Math.floor(Math.random() * compliments.length)];
    complimentDiv.textContent = text;
    complimentDiv.style.opacity = "1";
    complimentTimeout = setTimeout(() => {
      complimentDiv.style.opacity = "0";
    }, 1500);
  }

  // Desenhar fundo
  function drawBackground() {
    if (bgImage.complete && bgImage.naturalWidth !== 0) {
      ctx.drawImage(bgImage, 0, 0, canvas.width, canvas.height);
    } else {
      ctx.fillStyle = "#fff";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
  }

  // Desenhar mesa azul clara na parte inferior
  function drawMesaAzul() {
    ctx.fillStyle = "#87CEFA"; // azul claro
    ctx.fillRect(0, canvas.height - 60, canvas.width, 60);
  }

  // Desenhar tijolos (cora√ß√µes)
  function drawBricks() {
    for (let r = 0; r < brickRowCount; r++) {
      for (let c = 0; c < brickColumnCount; c++) {
        let b = bricks[r][c];
        if (b.status === 1) {
          const x = c * (brickWidth + brickPadding) + brickOffsetLeft;
          const y = r * (brickHeight + brickPadding) + brickOffsetTop;
          b.x = x;
          b.y = y;
          ctx.fillStyle = "#ff69b4";
          ctx.fillRect(x, y, brickWidth, brickHeight);
          ctx.fillStyle = "#000";
          ctx.font = "18px Arial";
          ctx.fillText("‚ù§Ô∏è", x + 3, y + 17);
        }
      }
    }
  }

  // Desenhar bolas
  function drawBalls() {
    balls.forEach(ball => {
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ballRadius, 0, Math.PI * 2);
      ctx.fillStyle = "#ff69b4";
      ctx.fill();
      ctx.closePath();
    });
  }

  // Desenhar paddle
  function drawPaddle() {
    ctx.fillStyle = "#fff";
    ctx.fillRect(paddleX, canvas.height - paddleHeight - 10, paddleWidth, paddleHeight);
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 2;
    ctx.strokeRect(paddleX, canvas.height - paddleHeight - 10, paddleWidth, paddleHeight);
  }

  // Colis√£o bola x tijolos
  function collisionDetection() {
    balls.forEach((ball, index) => {
      for (let r = 0; r < brickRowCount; r++) {
        for (let c = 0; c < brickColumnCount; c++) {
          let b = bricks[r][c];
          if (b.status === 1) {
            if (
              ball.x > b.x &&
              ball.x < b.x + brickWidth &&
              ball.y > b.y &&
              ball.y < b.y + brickHeight
            ) {
              ball.dy = -ball.dy;
              b.status = 0;
              score += 5;
              document.getElementById("score").textContent = score;
              if (score > highScore) {
                highScore = score;
                localStorage.setItem("highScoreAna", highScore);
                document.getElementById("highScore").textContent = highScore;
              }
              showCompliment();

              // Cria uma nova bola se tiver menos que 20
              if (balls.length < 20) {
                const angle = Math.random() * Math.PI * 2;
                const speed = 3;
                balls.push({
                  x: ball.x,
                  y: ball.y,
                  dx: speed * Math.cos(angle),
                  dy: speed * Math.sin(angle)
                });
              }
            }
          }
        }
      }
    });
  }

  // Atualizar posi√ß√£o da barra com mouse
  document.addEventListener("mousemove", e => {
    const rect = canvas.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    paddleX = mouseX - paddleWidth / 2;
    if (paddleX < 0) paddleX = 0;
    if (paddleX + paddleWidth > canvas.width) paddleX = canvas.width - paddleWidth;
  });

  // Atualizar jogo
  function update() {
    drawBackground();
    drawMesaAzul();
    drawBricks();
    drawBalls();
    drawPaddle();
    collisionDetection();

    balls.forEach((ball, i) => {
      ball.x += ball.dx;
      ball.y += ball.dy;

      // Colis√µes com paredes
      if (ball.x + ballRadius > canvas.width || ball.x - ballRadius < 0) {
        ball.dx = -ball.dx;
      }
      if (ball.y - ballRadius < 0) {
        ball.dy = -ball.dy;
      }

      // Colis√£o com paddle
      if (
        ball.y + ballRadius > canvas.height - paddleHeight - 10 &&
        ball.x > paddleX &&
        ball.x < paddleX + paddleWidth
      ) {
        ball.dy = -ball.dy;
        // Pequena varia√ß√£o horizontal ao bater no paddle
        let deltaX = ball.x - (paddleX + paddleWidth / 2);
        ball.dx = deltaX * 0.15;
      }

      // Bola caiu embaixo: remove essa bola
      if (ball.y - ballRadius > canvas.height) {
        balls.splice(i, 1);
      }
    });

    // Se n√£o houver bolas, jogo acabou
    if (balls.length === 0) {
      document.getElementById("finalMsg").style.display = "block";
      return; // para a anima√ß√£o
    }

    // Se todos os tijolos destru√≠dos, mostrar mensagem
    const allCleared = bricks.flat().every(b => b.status === 0);
    if (allCleared) {
      document.getElementById("finalMsg").style.display = "block";
      return;
    }

    requestAnimationFrame(update);
  }

  bgImage.onload = () => {
    update();
  };
</script>
</body>
</html>
